<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Speed Hell{% endblock %}</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
  <!-- HEADER + NAV -->
  <header class="site-header">
    <nav class="navbar">
      <div class="container">
        <div class="nav-left">
          <div class="navLogo">
            <img src="{% static 'pictures/logonav1.png' %}" height="100" width="200" alt="Logo">
          </div>
          <ul class="nav-list">
            <li><a href="{% url 'home' %}">Home</a></li>
            <li><a href="{% url 'about' %}">About</a></li>
            <li><a href="{% url 'patchn' %}">Patch notes</a></li>
            <li><a href="{% url 'qan' %}">Q&A</a></li>
          </ul>
        </div>
        <div class="login">
          <img src="{% static 'pictures/loginIcon.png' %}" alt="Login">
            <div class="dropdown-content">
             
                {% if user.is_authenticated %}
                  <a href="{% url 'profile' %}">Profile</a>
                    <a href="{% url 'logout' %}">Logout</a> 
                    {% else %}
                    <a href="#" id="loginLink">Login</a>
                    <a href="#" id="registerLink">Register</a>
                {% endif %}
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- LOGIN MODAL -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeLogin">&times;</span>
      <h2>Login</h2>
      <form method="POST" action="{% url 'login' %}">
        {% csrf_token %}
        <label for="login_username">Username:</label>
        <input type="text" name="username" id="login_username" required>
        <label for="login_password">Password:</label>
        <input type="password" name="password" id="login_password" required>
          <label>
        <input type="checkbox" name="remember_me"> Remember me
            </label> 
        <button type="submit">Login</button>
      </form>
    </div>
  </div>

  <!-- REGISTER MODAL -->
  <div id="registerModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeRegister">&times;</span>
      <h2>Register</h2>
      <form method="POST" action="{% url 'register' %}">
        {% csrf_token %}
        <label for="reg_username">Username</label>
        <input type="text" id="reg_username" name="username" required>
        <label for="reg_email">Email</label>
        <input type="email" id="reg_email" name="email" required>
        <label for="reg_password">Password</label>
        <input type="password" id="reg_password" name="password" required>
        <button type="submit">Register</button>
      </form>
    </div>
  </div>

  <!-- HLAVNÍ OBSAH STRÁNKY -->
  <main>
    {% block content %}{% endblock %}
  </main>

  <!-- JS pro modaly -->
  <script>
    const loginLink = document.getElementById("loginLink");
    const registerLink = document.getElementById("registerLink");
    const loginModal = document.getElementById("loginModal");
    const registerModal = document.getElementById("registerModal");
    const closeLogin = document.getElementById("closeLogin");
    const closeRegister = document.getElementById("closeRegister");

    loginLink.onclick = e => { e.preventDefault(); loginModal.style.display = "block"; };
    registerLink.onclick = e => { e.preventDefault(); registerModal.style.display = "block"; };
    closeLogin.onclick = () => loginModal.style.display = "none";
    closeRegister.onclick = () => registerModal.style.display = "none";
    window.onclick = e => {
      if(e.target == loginModal) loginModal.style.display = "none";
      if(e.target == registerModal) registerModal.style.display = "none";
    };
  </script>
</body>
</html>
